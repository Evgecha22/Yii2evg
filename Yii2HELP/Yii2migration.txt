Создание миграции
0)создаем базу данных в phpmyadmin и в папке конфиг в файле db.php даем название параметру db-name
1) открываем консоль и переходим в папку проекта
2)Создаем миграцыю командой:
php yii migrate/create create_название таблицы_table
3)Внимание должна быть последовательность создания миграцый с начала создаються сущности которые не ссылаются не на одну таблицу.
4)открываем файл каждой миграции и описываем столбцы таблицы Например: $this->createTable('{{%model}}', [
            'id' => $this->primaryKey(),
            'name' => $this->string(),
            'city' => $this->string(),
            'year' => $this->date(),
            'price' => $this->decimal(12,2),
            'photo' => $this->string(),
            'id_marka' => $this->integer(),
            'id_user' => $this->integer()
        ]);
 5)Создаем индексированное поле которые в последствии будет ссылатся на другую таблицу
 $this->createIndex(
            'idx-post-id_marka', // даем навзание индексному ключу 
            'model', // название таблицы которые создаются идексный ключ 
            'id_marka' // название столбца которые будет индексированым
        );
 6) Создаем внешний ключ который будет связан с другой таблицы. Внимание внешними ключами могут быть только индексированные столбцы
 $this->addForeignKey(
            'fk-post-id_marka', //даем навзание внешнему ключу
            'model', //таблица в которой создается внешний ключ
            'id_marka, //столбец который будет хранить значение внешнего ключа
            'marka', //таблица на которой ссылатся внешний ключ (устанавливаеться связь)
            'id', // столбец на который ссылатся внешний ключ
            'cascade' // при удалении строки в таблицы на которой ссылатся внешний ключ в текущий будут удаляться соответствующие строки
        );
 7) Для создание таблиц в БД на основе миграцый выполняем команду
 php yii migrate

//
